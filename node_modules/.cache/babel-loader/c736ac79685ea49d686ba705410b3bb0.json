{"ast":null,"code":"import _slicedToArray from\"/Users/hrithiksingh/Desktop/instagram/insta-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import'./Post.css';import Avatar from'@material-ui/core/Avatar';import{db}from\"./firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Post(_ref){var postId=_ref.postId,imageUrl=_ref.imageUrl,user=_ref.user,username=_ref.username,caption=_ref.caption;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];//to keep track of a single comment\nuseEffect(function(){var unsubscribe;if(postId){unsubscribe=db.collection('instapost').doc(postId).collection(\"comments\").onSnapshot(function(snapshot){setComments(snapshot.docs.map(function(doc){return doc.data();}));});//in simple word here we are summoning from comments which is on firebase db \n}return function(){unsubscribe();};},[postId]);function postComment(event){event.preventDefault();db.collection('instapost').doc(postId).collection(\"comments\").add({//simple word here we are adding it in a comments section of db\ntext:comment,username:user.displayName});setComment('');}return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post_header\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"post_avatar\",alt:\"\",src:\"\"}),/*#__PURE__*/_jsx(\"h3\",{children:username})]}),/*#__PURE__*/_jsx(\"img\",{className:\"post_image\",alt:\"\",src:imageUrl}),/*#__PURE__*/_jsxs(\"h4\",{className:\"post_text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:username}),\" \",caption]}),/*#__PURE__*/_jsx(\"div\",{className:\"coment_display\",children:comments.map(function(cmt){return/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:cmt.username}),cmt.text]})//came from database \n;})}),user&&/*#__PURE__*/_jsxs(\"form\",{className:\"post_commentBox\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"post_input\",type:\"text\",placeholder:\"Add a comment...\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{disabled:!comment,className:\"post_button\",type:\"submit\",onClick:postComment,children:\"post\"})]})]});}export default Post;","map":{"version":3,"sources":["/Users/hrithiksingh/Desktop/instagram/insta-clone/src/Post.js"],"names":["React","useState","useEffect","Avatar","db","Post","postId","imageUrl","user","username","caption","comments","setComments","comment","setComment","unsubscribe","collection","doc","onSnapshot","snapshot","docs","map","data","postComment","event","preventDefault","add","text","displayName","cmt","e","target","value"],"mappings":"oIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA2BC,SAA3B,KAA2C,OAA3C,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,OAASC,EAAT,KAAmB,YAAnB,C,wFAGA,QAASC,CAAAA,IAAT,MAA8D,IAA/CC,CAAAA,MAA+C,MAA/CA,MAA+C,CAAtCC,QAAsC,MAAtCA,QAAsC,CAA3BC,IAA2B,MAA3BA,IAA2B,CAArBC,QAAqB,MAArBA,QAAqB,CAAVC,OAAU,MAAVA,OAAU,eAC1BT,QAAQ,CAAC,EAAD,CADkB,wCACnDU,QADmD,eACzCC,WADyC,8BAE5BX,QAAQ,CAAC,EAAD,CAFoB,yCAEnDY,OAFmD,eAE1CC,UAF0C,eAEP;AAEnDZ,SAAS,CAAC,UAAM,CACZ,GAAIa,CAAAA,WAAJ,CACA,GAAGT,MAAH,CAAU,CACNS,WAAW,CAACX,EAAE,CAACY,UAAH,CAAc,WAAd,EAA2BC,GAA3B,CAA+BX,MAA/B,EAAuCU,UAAvC,CAAkD,UAAlD,EAA8DE,UAA9D,CAAyE,SAACC,QAAD,CAAc,CAC/FP,WAAW,CAACO,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACJ,GAAD,QAASA,CAAAA,GAAG,CAACK,IAAJ,EAAT,EAAlB,CAAD,CAAX,CAEC,CAHO,CAAZ,CAGY;AAEf,CACD,MAAM,WAAM,CACRP,WAAW,GACd,CAFD,CAKH,CAdQ,CAcP,CAACT,MAAD,CAdO,CAAT,CAgBA,QAASiB,CAAAA,WAAT,CAAqBC,KAArB,CAA2B,CACvBA,KAAK,CAACC,cAAN,GACArB,EAAE,CAACY,UAAH,CAAc,WAAd,EAA2BC,GAA3B,CAA+BX,MAA/B,EAAuCU,UAAvC,CAAkD,UAAlD,EAA8DU,GAA9D,CAAkE,CAAK;AACnEC,IAAI,CAAEd,OADwD,CAE9DJ,QAAQ,CAAED,IAAI,CAACoB,WAF+C,CAAlE,EAKAd,UAAU,CAAC,EAAD,CAAV,CAEH,CACD,mBACI,aAAK,SAAS,CAAC,MAAf,wBACA,aAAK,SAAS,CAAC,aAAf,wBACI,KAAC,MAAD,EAAQ,SAAS,CAAC,aAAlB,CAAgC,GAAG,CAAC,EAApC,CAAuC,GAAG,CAAC,EAA3C,EADJ,cAEI,oBAAKL,QAAL,EAFJ,GADA,cAOI,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAC,EAAhC,CAAmC,GAAG,CAAEF,QAAxC,EAPJ,cAQI,YAAI,SAAS,CAAC,WAAd,wBAA0B,wBAASE,QAAT,EAA1B,KAAuDC,OAAvD,GARJ,cASI,YAAK,SAAS,CAAC,gBAAf,UACKC,QAAQ,CAACU,GAAT,CAAa,SAACQ,GAAD,qBACV,kCAAG,wBAASA,GAAG,CAACpB,QAAb,EAAH,CAAmCoB,GAAG,CAACF,IAAvC,GAAoD;AAD1C,EAAb,CADL,EATJ,CAeKnB,IAAI,eACD,cAAM,SAAS,CAAC,iBAAhB,wBACG,cAAO,SAAS,CAAC,YAAjB,CAA8B,IAAI,CAAC,MAAnC,CAA0C,WAAW,CAAC,kBAAtD,CAAyE,KAAK,CAAEK,OAAhF,CAAyF,QAAQ,CAAE,kBAACiB,CAAD,QAAOhB,CAAAA,UAAU,CAACgB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB,EAAnG,EADH,cAEG,eAAQ,QAAQ,CAAE,CAACnB,OAAnB,CAA4B,SAAS,CAAC,aAAtC,CAAoD,IAAI,CAAC,QAAzD,CAAkE,OAAO,CAAEU,WAA3E,kBAFH,GAhBR,GADJ,CA4BH,CAED,cAAelB,CAAAA,IAAf","sourcesContent":["import React, { useState , useEffect} from \"react\";\nimport './Post.css';\nimport Avatar from '@material-ui/core/Avatar';\nimport { db } from \"./firebase\";\n\n\nfunction Post({postId , imageUrl , user, username , caption}) {\n    const [comments, setComments] = useState([]);\n    const [comment, setComment] = useState(\"\");        //to keep track of a single comment\n\n    useEffect(() => {\n        let unsubscribe;\n        if(postId){\n            unsubscribe=db.collection('instapost').doc(postId).collection(\"comments\").onSnapshot((snapshot) => {\n                setComments(snapshot.docs.map((doc) => doc.data()));\n\n                });     //in simple word here we are summoning from comments which is on firebase db \n           \n        }\n        return() => {\n            unsubscribe();\n        }\n\n\n    },[postId])\n\n    function postComment(event){\n        event.preventDefault();\n        db.collection('instapost').doc(postId).collection(\"comments\").add({    //simple word here we are adding it in a comments section of db\n            text: comment,\n            username: user.displayName\n\n        })\n        setComment('');\n\n    }\n    return (\n        <div className=\"post\">\n        <div className=\"post_header\">\n            <Avatar className=\"post_avatar\" alt=\"\" src=\"\"/>\n            <h3>{username}</h3>\n        </div>\n\n            \n            <img className=\"post_image\" alt=\"\" src={imageUrl}></img>\n            <h4 className=\"post_text\"><strong>{username}</strong> {caption}</h4>\n            <div className=\"coment_display\">\n                {comments.map((cmt)=>(\n                    <p><strong>{cmt.username}</strong>{cmt.text}</p>    //came from database \n                ))}\n            </div>\n            \n            {user && (\n                <form className=\"post_commentBox\">\n                   <input className=\"post_input\" type=\"text\" placeholder=\"Add a comment...\" value={comment} onChange={(e) => setComment(e.target.value)} />\n                   <button disabled={!comment} className=\"post_button\" type=\"submit\" onClick={postComment} >post</button>\n               </form>\n            )}        \n\n            {/* user && is for when user is there then only show add a comment button */}\n\n            \n        </div>\n    )\n}\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}